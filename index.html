<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<title>ุชูุฑูุฑ ูููู</title>
<style>
    body { font-family: 'Arial', sans-serif; direction: rtl; text-align: right; padding: 20px; background-color: #f0f0f0; }
    label { display: block; margin-top: 10px; }
    select, input, textarea { width: 100%; margin-top: 5px; padding: 5px; }
    .section { margin-bottom: 20px; background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    h2 { background-color: #004d66; color: white; padding: 10px; border-radius: 5px; }
    button { background-color: #004d66; color: white; padding: 10px 20px; border: none; border-radius: 5px; margin-top: 10px; cursor: pointer; }
    #location { display: none; }
</style>
</head>
<body>
<form id="dailyReportForm" method="POST" action="https://script.google.com/macros/s/AKfycbxAh4_cr4dPHTDYC6GoHg9IhUd3yGPw0tGp9ez4adDgbyNqiaz-JhodfllL6OLFXfw49Q/exec">
  <div style="text-align: center; margin-bottom: 20px;">
    <img src="druzepulse_logo.png" alt="DruzePulse Logo" style="max-width: 200px;"/>
  </div>
  <h1>๐ ุชูุฑูุฑ ืืืู: ุตูุฑุฉ ุงููุถุน ุงููุฏูู</h1>
  <div class="section">
    <h2>๐๏ธ ูุนูููุงุช ุฃุณุงุณูุฉ</h2>
    <label>๐ ุงูุชุงุฑูุฎ:<input id="date" name="date" type="date" required/></label>
    <label>โฐ ุงูููุช:<input id="time" name="time" type="time" required/></label>
    <label>๐๏ธ ุงูุจูุฏุฉ:
      <select id="village" name="village" onchange="toggleOtherVillageInput(this)">
        <!-- ูุงุฆูุฉ ืืืืฉืืืื ืืืจืืืืื ืืกืืจืื ืืขื 10% -->
        <option>ุงูุณููุฏุงุก</option>
        <option>ุตูุฎุฏ</option>
        <option>ุดูุจุง</option>
        <option>ูููุงุช</option>
        <option>ุฑุงุณ ุงูุนูู</option>
        <option>ุนุชูุงู</option>
        <option>ุงูุญูุฉ</option>
        <option>ูุฒุฑุนุฉ ุจูุช ุฌู</option>
        <option>ุฑูููู</option>
        <option>ุฃุฎุฑ</option>
      </select>
    </label>
    <label id="otherVillageLabel" style="display:none;">๐ค ุฃุฏุฎู ุงุณู ุงูุจูุฏุฉ: <input id="otherVillageInput" name="other_village" type="text"/></label>
    <label>๐ค ุงุณู ููุซู ุงูุจูุฏู: <input name="rep_name" type="text" required/></label>
    <label>๐ ุฑูู ูุงุชู ููุซู ุงูุจูุฏู: <input name="rep_phone" type="tel" required/></label>
    <label>๐ค ุงุณู ูุงุฆุฏ ุงูููุฉ ุงูุนุณูุฑูุฉ: <input name="cmdr_name" type="text" required/></label>
    <label>๐ ุฑูู ูุงุชู ุงูููุฉ ุงูุนุณูุฑูุฉ: <input name="cmdr_phone" type="tel" required/></label>
  </div>
  <div class="section">
    <h2>๐จ ูุถุน ุงูุณูุงู</h2>
    <label>ุนุฏุฏ ุงูุณูุงู ุงูุฐูู ุชู ุฅุฌูุงุคูู: <input type="number" name="evacuated"/></label>
    <label>ุนุฏุฏ ุงูุณูุงู ุงููุฎุทูููู: <input type="number" name="kidnapped"/></label>
    <label>ุนุฏุฏ ุงูุณูุงู ุงููุงุฌุฆูู / ุงููุณุชุถุงููู: <input type="number" name="refugees"/></label>
    <label>ุนุฏุฏ ุงูุณูุงู ุงููุตุงุจูู / ุงููุชุถุฑุฑูู: <input type="number" name="injured"/></label>
  </div>
  <div class="section">
    <h2>๐ฅ ุงูุฎุฏูุงุช ุงูุฏุงุนูุฉ</h2>
    <label>๐ฅ ูุฑูุฒ ุงูุงุชุตุงู:
      <select name="communication_center"><option>ูุชููุฑ</option><option>ุงุณุชุฌุงุจุฉ ุถุนููุฉ</option><option>ูุง ููุฌุฏ</option><option>ุฃุนุทุงู</option><option>ุฃุฎุฑ</option></select>
      <input type="text" name="communication_center_other" placeholder="ูุฑุฌู ุงูุชุญุฏูุฏ ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุฃุฎุฑ" style="display:none; margin-top:5px;"/>
    </label>
    <label>๐ฅ ูุฑูุฒ ุทุจู / ุนูุงุฏุงุช / ูุฑู ุทุจูุฉ:
      <select name="medical_center"><option>ูุชููุฑ</option><option>ุฌุฒุฆู</option><option>ุบูุฑ ูุชููุฑ</option><option>ุฃุฎุฑ</option></select>
      <input type="text" name="medical_center_other" placeholder="ูุฑุฌู ุงูุชุญุฏูุฏ ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุฃุฎุฑ" style="display:none; margin-top:5px;"/>
    </label>
    <label>๐ ูุนุฏุงุช ููุชุญ ุงูุทุฑู / ูุชุญ ูุญุงูุฑ / ุฌุฑุงุฑุงุช:
      <select name="road_equipment"><option>ูุชููุฑุฉ</option><option>ููููุฉ</option><option>ุบูุฑ ูุชููุฑุฉ</option><option>ืุฎุฑ</option></select>
      <input type="text" name="road_equipment_other" placeholder="ูุฑุฌู ุงูุชุญุฏูุฏ ุฅุฐุง ุชู ุงุฎุชูุงุฑ ุฃุฎุฑ" style="display:none; margin-top:5px;"/>
    </label>
  </div>
  <button type="submit">ุฅุฑุณุงู</button>
  <button type="button" onclick="sendToWhatsApp()">๐ค ุฅุฑุณุงู ุฅูู ูุงุชุณุงุจ</button>
  <button type="button" onclick="window.print()">๐จ๏ธ ุทุจุงุนุฉ / ุชุตุฏูุฑ PDF</button>
  <input id="location" name="location" type="hidden"/>
</form>
<script>
function toggleOtherVillageInput(select) {
  document.getElementById('otherVillageLabel').style.display = (select.value === 'ุฃุฎุฑ') ? 'block' : 'none';
}
window.onload = function() {
  const now = new Date();
  document.getElementById('date').valueAsDate = now;
  document.getElementById('time').value = now.toTimeString().slice(0,5);
  if (navigator.geolocation) navigator.geolocation.getCurrentPosition(pos => {
    document.getElementById('location').value = `${pos.coords.latitude.toFixed(5)},${pos.coords.longitude.toFixed(5)}`;
  }, () => document.getElementById('location').value = 'ุบูุฑ ูุชุงุญ');
  document.getElementById('dailyReportForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    fetch(this.action, { method: 'POST', mode: 'no-cors', body: formData })
      .then(() => alert('โ ุชู ุงูุฅุฑุณุงู ุจูุฌุงุญ'))
      .catch(() => alert('โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุฅุฑุณุงู'));
  });
};
function sendToWhatsApp() {
  let msg = "ุชูุฑูุฑ ุฌุฏูุฏ:\n";
  document.querySelectorAll("input, select, textarea").forEach(input => {
    if (input.type === 'hidden') return;
    const lbl = input.closest('label');
    if (!lbl) return;
    const key = lbl.innerText.split(':')[0].trim();
    const val = input.value || (input.selectedOptions ? input.selectedOptions[0].text : '');
    if (val) msg += `${key}: ${val}\n`;
  });
  window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
}
</script>
</body>
</html>
